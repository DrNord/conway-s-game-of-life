/*!
Copyright (C) 2021 Dr. Nord
*/
function t(t,e,r){var l=this;l.ctx={gl:null,canvas:null},l.ctx.gl=function(t){let e=null;try{e=t.getContext("webgl",{premultipliedAlpha:!1,antialias:!1})||t.getContext("experimental-webgl",{premultipliedAlpha:!1,antialias:!1})}catch(t){}e||(e=null,console.log("Unable to initialize WebGL. Your browser may not support it."));return e}(t),l.cells_alive=new Uint32Array(1),l.cell_size=r,l.cell_size_attr=null,l.rgba_color=[0,0,0,1],l.rgba_color_attr=null,l.start=i,l.draw=a,l.start(t,e)}function i(t,e){let r=this.ctx.gl;r&&(r.viewport(0,0,t.width,t.height),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.clearColor(1,1,1,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),r.vertices=e,r.vertex_buffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,r.vertex_buffer);var l=r.createShader(r.VERTEX_SHADER);r.shaderSource(l,"attribute vec2 coordinates;attribute float cell_size;void main(void) { gl_Position = vec4(coordinates, 0.0, 1.0); gl_PointSize = cell_size;}"),r.compileShader(l);t=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(t,"precision mediump float;uniform vec4 rgba_color;void main(void) {gl_FragColor = rgba_color;}"),r.compileShader(t);e=r.createProgram();r.attachShader(e,l),r.attachShader(e,t),r.linkProgram(e),r.useProgram(e);t=r.getAttribLocation(e,"coordinates");this.cell_size_attr=r.getAttribLocation(e,"cell_size"),this.rgba_color_attr=r.getUniformLocation(e,"rgba_color"),r.vertexAttribPointer(t,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t)}function a(){let t=this.ctx.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.bufferData(this.ctx.gl.ARRAY_BUFFER,new Float32Array(this.ctx.gl.vertices),this.ctx.gl.DYNAMIC_DRAW),t.vertexAttrib1f(this.cell_size_attr,this.cell_size),t.uniform4f(this.rgba_color_attr,this.rgba_color[0],this.rgba_color[1],this.rgba_color[2],1),t.drawArrays(this.ctx.gl.POINTS,0,this.cells_alive[0])}export{t as WebGl_init};